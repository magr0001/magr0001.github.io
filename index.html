<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitness App</title>
    <style>
        body {
            background-color: #333;
            color: #f0f0f0;
            font-family: Arial, sans-serif;
        }
        .timer-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #count-up-timer, #count-down-timer {
            font-size: 1.5em;
            padding: 10px;
            cursor: pointer;
        }
        .exercise {
            background-color: #444;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .input-label {
            display: block;
            margin-top: 5px;
        }
        .note {
            width: 100%;
            max-height: 100px;
            overflow: auto;
        }
        .add-exercise, .reset-button {
            background-color: #555;
            padding: 10px;
            text-align: center;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="timer-container">
        <div id="count-up-timer">00:00:00</div>
        <div id="count-down-timer">02:00</div>
    </div>
    <h2>Übungen</h2>
    <div id="exercises-list"></div>
    <div class="add-exercise" onclick="addExerciseForm()">Neue Übung hinzufügen</div>
    <div class="reset-button" onclick="resetAll()">Alle Daten zurücksetzen</div>

    <script>
        let exercises = [];
        let countUpSeconds = 0;
        let countUpInterval;
        let countDownSeconds = 120;
        let countDownInterval;

        function addExerciseForm() {
            const exerciseForm = document.createElement('div');
            exerciseForm.className = 'exercise';
            exerciseForm.innerHTML = `
                <input type="text" id="exercise-name" placeholder="Übungsname"><br>
                <label class="input-label">Intervall (in Tagen)</label>
                <input type="number" id="exercise-interval" placeholder="Tage"><br>
                <button onclick="saveExercise()">Speichern</button>
            `;
            document.body.appendChild(exerciseForm);
        }

        function saveExercise() {
            const name = document.getElementById('exercise-name').value;
            const interval = parseInt(document.getElementById('exercise-interval').value);
            if (name && interval) {
                exercises.push({ name, interval, daysRemaining: interval, sets: [], note: "" });
                renderExercises();
            }
        }

        function renderExercises() {
            const exercisesList = document.getElementById('exercises-list');
            exercisesList.innerHTML = '';
            exercises.sort((a, b) => a.daysRemaining - b.daysRemaining).forEach((exercise, index) => {
                const exerciseDiv = document.createElement('div');
                exerciseDiv.className = 'exercise';
                exerciseDiv.innerHTML = `
                    <div onclick="toggleExercise(${index})">
                        ${exercise.name} (${exercise.interval}) - Tage: ${exercise.daysRemaining}
                    </div>
                    <div id="exercise-${index}" style="display: none;">
                        <label class="input-label">Gewicht</label>
                        <input type="number" placeholder="Gewicht" oninput="updateSet(${index}, 0, 'weight', this.value)">
                        <label class="input-label">Wiederholungen</label>
                        <input type="number" placeholder="Wiederholungen" oninput="updateSet(${index}, 0, 'reps', this.value)">
                        <button onclick="addSet(${index})">Satz hinzufügen</button>
                        <button onclick="removeExercise(${index})">Löschen</button>
                        <textarea class="note" oninput="updateNote(${index}, this.value)" placeholder="Notiz">${exercise.note}</textarea>
                    </div>
                `;
                exercisesList.appendChild(exerciseDiv);
            });
        }

        function toggleExercise(index) {
            const exerciseDiv = document.getElementById(`exercise-${index}`);
            exerciseDiv.style.display = exerciseDiv.style.display === 'none' ? 'block' : 'none';
        }

        function addSet(index) {
            exercises[index].sets.push({ weight: 0, reps: 0 });
            renderExercises();
        }

        function updateSet(exIndex, setIndex, key, value) {
            exercises[exIndex].sets[setIndex][key] = value;
        }

        function updateNote(index, value) {
            exercises[index].note = value;
        }

        function removeExercise(index) {
            exercises.splice(index, 1);
            renderExercises();
        }

        function resetAll() {
            if (confirm("Willst du wirklich alles löschen?")) {
                exercises = [];
                renderExercises();
            }
        }

        // Count-up timer
        document.getElementById('count-up-timer').addEventListener('dblclick', resetCountUp);
        function startCountUp() {
            countUpInterval = setInterval(() => {
                countUpSeconds++;
                document.getElementById('count-up-timer').textContent = formatTime(countUpSeconds);
            }, 1000);
        }
        function resetCountUp() {
            clearInterval(countUpInterval);
            countUpSeconds = 0;
            document.getElementById('count-up-timer').textContent = '00:00:00';
            startCountUp();
        }
        startCountUp();

        // Count-down timer
        document.getElementById('count-down-timer').addEventListener('dblclick', resetCountDown);
        function startCountDown() {
            countDownInterval = setInterval(() => {
                if (countDownSeconds > 0) {
                    countDownSeconds--;
                    document.getElementById('count-down-timer').textContent = formatTime(countDownSeconds);
                } else {
                    clearInterval(countDownInterval);
                }
            }, 1000);
        }
        function resetCountDown() {
            clearInterval(countDownInterval);
            countDownSeconds = 120;
            document.getElementById('count-down-timer').textContent = '02:00';
            startCountDown();
        }
        startCountDown();

        function formatTime(seconds) {
            const hrs = Math.floor(seconds / 3600);
            const mins = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            return `${String(hrs).padStart(2, '0')}:${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        }

        renderExercises();
    </script>
</body>
</html>